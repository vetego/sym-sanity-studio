{"version":3,"sources":["../src/documentHasErrors.ts"],"sourcesContent":["import type {SanityDocument} from './types.js'\n\nexport function validateDocument(doc: unknown): string | null {\n  const document = doc as Partial<SanityDocument>\n\n  if (typeof document._id !== 'undefined' && typeof document._id !== 'string') {\n    return `Document contained an invalid \"_id\" property - must be a string`\n  }\n\n  if (typeof document._id !== 'undefined' && !/^[a-z0-9_.-]+$/i.test(document._id)) {\n    return `Document ID \"${document._id}\" is not valid: Please use alphanumeric document IDs. Dashes (-) and underscores (_) are also allowed.`\n  }\n\n  if (typeof document._type !== 'string') {\n    return `Document did not contain required \"_type\" property of type string`\n  }\n\n  return null\n}\n\nexport function documentHasError(doc: unknown, index: number): void {\n  const err = validateDocument(doc)\n  if (err) {\n    throw new Error(`Failed to parse document at index #${index}: ${err}`)\n  }\n}\n"],"names":["validateDocument","doc","document","_id","test","_type","documentHasError","index","err","Error"],"mappings":"AAEA,OAAO,SAASA,iBAAiBC,GAAY;IAC3C,MAAMC,WAAWD;IAEjB,IAAI,OAAOC,SAASC,GAAG,KAAK,eAAe,OAAOD,SAASC,GAAG,KAAK,UAAU;QAC3E,OAAO,CAAC,+DAA+D,CAAC;IAC1E;IAEA,IAAI,OAAOD,SAASC,GAAG,KAAK,eAAe,CAAC,kBAAkBC,IAAI,CAACF,SAASC,GAAG,GAAG;QAChF,OAAO,CAAC,aAAa,EAAED,SAASC,GAAG,CAAC,sGAAsG,CAAC;IAC7I;IAEA,IAAI,OAAOD,SAASG,KAAK,KAAK,UAAU;QACtC,OAAO,CAAC,iEAAiE,CAAC;IAC5E;IAEA,OAAO;AACT;AAEA,OAAO,SAASC,iBAAiBL,GAAY,EAAEM,KAAa;IAC1D,MAAMC,MAAMR,iBAAiBC;IAC7B,IAAIO,KAAK;QACP,MAAM,IAAIC,MAAM,CAAC,mCAAmC,EAAEF,MAAM,EAAE,EAAEC,KAAK;IACvE;AACF"}