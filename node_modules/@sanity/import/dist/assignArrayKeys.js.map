{"version":3,"sources":["../src/assignArrayKeys.ts"],"sourcesContent":["import {getRandomValues} from 'node:crypto'\n\nimport {isPlainObject} from 'lodash-es'\n\ntype PlainObject = Record<string, unknown>\n\n// Note: Mutates in-place\nfunction assignArrayKeys<T>(obj: T): T {\n  if (Array.isArray(obj)) {\n    obj.forEach((item: unknown) => {\n      if (isPlainObject(item) && !('_key' in (item as object))) {\n        ;(item as PlainObject)._key = generateKey()\n      }\n\n      assignArrayKeys(item)\n    })\n\n    return obj\n  }\n\n  if (isPlainObject(obj)) {\n    const plainObj = obj as PlainObject\n    Object.keys(plainObj).forEach((key: string) => {\n      assignArrayKeys(plainObj[key])\n    })\n\n    return obj\n  }\n\n  return obj\n}\n\nfunction generateKey(length = 8): string {\n  const chars = 'abcdefghijklmnopqrstuvwxyz0123456789'\n  const bytes = new Uint8Array(length)\n  getRandomValues(bytes)\n  return Array.from(bytes, (b) => chars[b % chars.length]).join('')\n}\n\nexport {assignArrayKeys}\n"],"names":["getRandomValues","isPlainObject","assignArrayKeys","obj","Array","isArray","forEach","item","_key","generateKey","plainObj","Object","keys","key","length","chars","bytes","Uint8Array","from","b","join"],"mappings":"AAAA,SAAQA,eAAe,QAAO,cAAa;AAE3C,SAAQC,aAAa,QAAO,YAAW;AAIvC,yBAAyB;AACzB,SAASC,gBAAmBC,GAAM;IAChC,IAAIC,MAAMC,OAAO,CAACF,MAAM;QACtBA,IAAIG,OAAO,CAAC,CAACC;YACX,IAAIN,cAAcM,SAAS,CAAE,CAAA,UAAWA,IAAc,GAAI;;gBACtDA,KAAqBC,IAAI,GAAGC;YAChC;YAEAP,gBAAgBK;QAClB;QAEA,OAAOJ;IACT;IAEA,IAAIF,cAAcE,MAAM;QACtB,MAAMO,WAAWP;QACjBQ,OAAOC,IAAI,CAACF,UAAUJ,OAAO,CAAC,CAACO;YAC7BX,gBAAgBQ,QAAQ,CAACG,IAAI;QAC/B;QAEA,OAAOV;IACT;IAEA,OAAOA;AACT;AAEA,SAASM,YAAYK,SAAS,CAAC;IAC7B,MAAMC,QAAQ;IACd,MAAMC,QAAQ,IAAIC,WAAWH;IAC7Bd,gBAAgBgB;IAChB,OAAOZ,MAAMc,IAAI,CAACF,OAAO,CAACG,IAAMJ,KAAK,CAACI,IAAIJ,MAAMD,MAAM,CAAC,EAAEM,IAAI,CAAC;AAChE;AAEA,SAAQlB,eAAe,GAAC"}