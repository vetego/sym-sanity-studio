{"version":3,"sources":["../src/import.ts"],"sourcesContent":["import {importDocuments as fromArray} from './importFromArray.js'\nimport {importFromFolder as fromFolder} from './importFromFolder.js'\nimport {importFromStream as fromStream} from './importFromStream.js'\nimport type {ImportersContext, ImportOptions, ImportResult, ImportSource} from './types.js'\nimport {validateOptions} from './validateOptions.js'\n\nexport {DatasetImportCommand} from './commands/dataset/import.js'\n\nexport function sanityImport(\n  input: ImportSource,\n  opts: Partial<ImportOptions>,\n): Promise<ImportResult> {\n  const options = validateOptions(input, opts)\n\n  // Create the importers context to allow circular references\n  const importers: ImportersContext = {\n    fromStream: (stream, importOptions, ctx) => fromStream(stream, importOptions, ctx),\n    fromArray: (documents, importOptions) => fromArray(documents, importOptions),\n    fromFolder: (fromDir, importOptions, ctx) => fromFolder(fromDir, importOptions, ctx),\n  }\n\n  if (\n    typeof input === 'object' &&\n    input !== null &&\n    'pipe' in input &&\n    typeof input.pipe === 'function'\n  ) {\n    return fromStream(input, options, importers)\n  }\n\n  if (Array.isArray(input)) {\n    return fromArray(input, options)\n  }\n\n  if (typeof input === 'string') {\n    return fromFolder(input, options, importers)\n  }\n\n  throw new Error('Input does not seem to be a readable stream, an array or a path to a directory')\n}\n"],"names":["importDocuments","fromArray","importFromFolder","fromFolder","importFromStream","fromStream","validateOptions","DatasetImportCommand","sanityImport","input","opts","options","importers","stream","importOptions","ctx","documents","fromDir","pipe","Array","isArray","Error"],"mappings":"AAAA,SAAQA,mBAAmBC,SAAS,QAAO,uBAAsB;AACjE,SAAQC,oBAAoBC,UAAU,QAAO,wBAAuB;AACpE,SAAQC,oBAAoBC,UAAU,QAAO,wBAAuB;AAEpE,SAAQC,eAAe,QAAO,uBAAsB;AAEpD,SAAQC,oBAAoB,QAAO,+BAA8B;AAEjE,OAAO,SAASC,aACdC,KAAmB,EACnBC,IAA4B;IAE5B,MAAMC,UAAUL,gBAAgBG,OAAOC;IAEvC,4DAA4D;IAC5D,MAAME,YAA8B;QAClCP,YAAY,CAACQ,QAAQC,eAAeC,MAAQV,WAAWQ,QAAQC,eAAeC;QAC9Ed,WAAW,CAACe,WAAWF,gBAAkBb,UAAUe,WAAWF;QAC9DX,YAAY,CAACc,SAASH,eAAeC,MAAQZ,WAAWc,SAASH,eAAeC;IAClF;IAEA,IACE,OAAON,UAAU,YACjBA,UAAU,QACV,UAAUA,SACV,OAAOA,MAAMS,IAAI,KAAK,YACtB;QACA,OAAOb,WAAWI,OAAOE,SAASC;IACpC;IAEA,IAAIO,MAAMC,OAAO,CAACX,QAAQ;QACxB,OAAOR,UAAUQ,OAAOE;IAC1B;IAEA,IAAI,OAAOF,UAAU,UAAU;QAC7B,OAAON,WAAWM,OAAOE,SAASC;IACpC;IAEA,MAAM,IAAIS,MAAM;AAClB"}