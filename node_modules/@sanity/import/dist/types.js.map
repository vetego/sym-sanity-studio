{"version":3,"sources":["../src/types.ts"],"sourcesContent":["import type {SanityClient} from '@sanity/client'\n\nexport interface SanityDocument {\n  _id: string\n  _type: string\n  _rev?: string\n  _createdAt?: string\n  _updatedAt?: string\n  [key: string]: unknown\n}\n\nexport interface AssetDocument extends SanityDocument {\n  _type: 'sanity.imageAsset' | 'sanity.fileAsset'\n  url?: string\n  path?: string\n  sha1hash?: string\n  size?: number\n  mimeType?: string\n  originalFilename?: string\n  metadata?: Record<string, unknown>\n}\n\nexport interface AssetMap {\n  [url: string]: AssetDocument\n}\n\nexport interface ProgressEvent {\n  step: string\n  current?: number\n  total?: number\n  update?: string\n}\n\nexport interface ImportOptions {\n  client: SanityClient\n  operation: 'create' | 'createIfNotExists' | 'createOrReplace'\n  onProgress: (event: ProgressEvent) => void\n  allowAssetsInDifferentDataset: boolean\n  replaceAssets: boolean\n  skipCrossDatasetReferences: boolean\n  allowSystemDocuments: boolean\n  releasesOperation: 'fail' | 'ignore' | 'replace'\n  tag: string\n  targetProjectId?: string\n  targetDataset?: string\n  assetConcurrency?: number\n  assetVerificationConcurrency?: number\n  allowFailingAssets?: boolean\n  assetMap?: AssetMap\n  unreferencedAssets?: string[]\n  assetsBase?: string\n  deleteOnComplete?: boolean\n}\n\nexport interface ImportResult {\n  numDocs: number\n  warnings: Array<{message: string}>\n}\n\nexport interface BatchResult extends ImportResult {\n  results: Array<{\n    id: string\n    operation: string\n  }>\n}\n\nexport interface AssetResult {\n  _id: string\n  document: AssetDocument\n}\n\nexport interface DocumentWithAssets {\n  document: SanityDocument\n  assets: AssetDocument[]\n}\n\nexport interface StreamReference {\n  _ref: string\n  _weak?: boolean\n  _strengthenOnPublish?: boolean\n}\n\nexport interface Reference extends StreamReference {\n  _type: 'reference'\n}\n\nexport type ImportSource = NodeJS.ReadableStream | SanityDocument[] | string\n\nexport interface ImportContext {\n  options: ImportOptions\n  assets: AssetMap\n  references: Map<string, StreamReference[]>\n}\n\n// Error interfaces for better type safety\nexport interface AssetUploadError extends Error {\n  url: string\n  type?: string\n  attempts?: number\n}\n\nexport interface SanityApiError extends Error {\n  response?: {\n    status: number\n    statusCode: number\n    statusText: string\n  }\n  statusCode?: number\n}\n\nexport interface TarExtractError extends Error {\n  extract?: unknown\n}\n\n// Fetch response types\nexport interface SanityFetchResponse {\n  _id: string\n  url?: string\n  [key: string]: unknown\n}\n\n// Asset document with dimensions for validation\nexport interface AssetDocumentWithMetadata extends AssetDocument {\n  metadata?: {\n    dimensions?: {\n      width: number\n      height: number\n    }\n    [key: string]: unknown\n  }\n}\n\n// Asset failure for reporting\nexport interface AssetFailure {\n  type: 'asset'\n  url: string\n  documents: Array<{\n    documentId: string\n    path: string\n  }>\n}\n\n// Tar-stream types for stream processing\nexport interface TarEntry {\n  name: string\n  size: number\n  type: string\n}\n\n// JSON streaming event emitter types\nexport interface JsonStreamEvent {\n  type: 'data' | 'error' | 'end'\n  data?: unknown\n  error?: Error\n}\n\n// HTTP response from get-it library\nexport interface GetItResponse {\n  body: NodeJS.ReadableStream\n  headers?: Record<string, string>\n  status?: number\n}\n\n// Circular dependency context for importers\nexport interface ImportersContext {\n  fromStream: (\n    stream: NodeJS.ReadableStream,\n    options: ImportOptions,\n    ctx: ImportersContext,\n  ) => Promise<ImportResult>\n  fromArray: (documents: SanityDocument[], options: ImportOptions) => Promise<ImportResult>\n  fromFolder: (\n    fromDir: string,\n    options: ImportOptions & {deleteOnComplete?: boolean},\n    ctx: ImportersContext,\n  ) => Promise<ImportResult>\n}\n\n// Cross-dataset reference\nexport interface CrossDatasetReference extends StreamReference {\n  _dataset: string\n  _projectId?: string\n}\n\n// Asset metadata structure\nexport interface AssetMetadata {\n  dimensions?: {\n    width: number\n    height: number\n  }\n  [key: string]: unknown\n}\n"],"names":[],"mappings":"AAwLA,2BAA2B;AAC3B,WAMC"}