{"version":3,"sources":["../../src/util/progressStepper.ts"],"sourcesContent":["import type {ProgressEvent} from '../types.js'\n\ninterface ProgressStepperOptions {\n  step: string\n  total: number\n}\n\nfunction progressStepper<T>(\n  onProgress: (event: ProgressEvent) => void,\n  options: ProgressStepperOptions,\n): (inp?: T) => T {\n  let current = -1\n\n  // Stepper function which increments progress up to defined total and returns\n  // input argument verbatim so it may be used in the middle of a promise chain\n  const step = (inp?: T): T => {\n    onProgress({\n      step: options.step,\n      total: options.total,\n      current: Math.min(++current, options.total),\n    })\n\n    return inp as T\n  }\n\n  step()\n  return step\n}\n\nexport {progressStepper}\n"],"names":["progressStepper","onProgress","options","current","step","inp","total","Math","min"],"mappings":"AAOA,SAASA,gBACPC,UAA0C,EAC1CC,OAA+B;IAE/B,IAAIC,UAAU,CAAC;IAEf,6EAA6E;IAC7E,6EAA6E;IAC7E,MAAMC,OAAO,CAACC;QACZJ,WAAW;YACTG,MAAMF,QAAQE,IAAI;YAClBE,OAAOJ,QAAQI,KAAK;YACpBH,SAASI,KAAKC,GAAG,CAAC,EAAEL,SAASD,QAAQI,KAAK;QAC5C;QAEA,OAAOD;IACT;IAEAD;IACA,OAAOA;AACT;AAEA,SAAQJ,eAAe,GAAC"}